@model List<AmazonClone.MVC.Models.Product>

<h2>@Model.FirstOrDefault()?.SubCategoryName</h2>
<link href="~/css/product.css" rel="stylesheet" />

<div class="products-grid">
    @if (Model != null && Model.Any())
    {
        @foreach (var product in Model)
        {
            <div class="product-card">
                <a asp-controller="Product"
                   asp-action="ProductDetails"
                   asp-route-Id="@product.Id">
                    <div class="product-image">
                        <img src="@GetProductImageUrl(product.Name)"
                             alt="@product.Name" />
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">@product.Name</h3>
                        <p class="product-price">₹@product.Price.ToString("N0")</p>
                    </div>
                </a>
                <div class="wishlist-icon" title="Add to Wishlist">
                    <i class="fas fa-heart" onclick="addToWishlist(@product.Id)"></i>
                </div>
            </div>
        }
    }
    else
    {
        <p class="no-products">No products available for this subcategory.</p>
    }
</div>

@functions {
    string GetProductImageUrl(string productName)
    {
        if (string.IsNullOrEmpty(productName))
        {
            return "/images/products/default.jpg";
        }
        var specialCases = new Dictionary<string, string>
        {
            {"iPhone 14 Pro", "https://m.media-amazon.com/images/I/71qO1iuMAGL._AC_UL320_.jpg"},
            {"Samsung Galaxy S23", "https://m.media-amazon.com/images/I/61-E0V81kBL._AC_UY218_.jpg"},
            {"Google Pixel 8", "https://m.media-amazon.com/images/I/51zKbcOw1rL._AC_UL320_.jpg"},
            {"OnePlus 12", "https://m.media-amazon.com/images/I/71o8VehMHXL._AC_UY218_.jpg"},
            {"Xiaomi 13 Pro", "https://m.media-amazon.com/images/I/61RvCwjI7dL._AC_UY218_.jpg"},
            {"Motorola Edge 40", "https://m.media-amazon.com/images/I/71gL3+m6uuL._AC_UL320_.jpg"},
            {"ASUS ROG Phone 7", "https://m.media-amazon.com/images/I/31QwUqcvKjL._AC_UL320_.jpg"},
            {"Realme GT Neo 5", "https://m.media-amazon.com/images/I/61HyiMlCuTL._AC_UY218_.jpg"},
            {"Sony Xperia 1 V", "https://m.media-amazon.com/images/I/71UdkYWXjCL._AC_UL320_.jpg"},
            {"Nothing Phone 2", "https://m.media-amazon.com/images/I/81S3-nKXeRL._AC_UL320_.jpg"},
            {"Hp15s,12thGen", "https://m.media-amazon.com/images/W/MEDIAX_1215821-T1/images/I/71+gQ9gOTuL._AC_UL320_.jpg"}
        };
        return specialCases.TryGetValue(productName, out var specialUrl)
            ? specialUrl
            : "/images/products/default.jpg";
    }
}
